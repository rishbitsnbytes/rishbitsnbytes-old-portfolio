<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reconciliation in React</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>

    <nav class="navigation"> <a class="link link-active link-back-button" href="/blogs.html">go back</a>
    </nav>
    <header class="hero">
        <h1 class="blog-h1">Reconciliation in React</h1>
        <img class="hero-img" src="/images/blog1-hero.png">
        <h1 class="hero-heading"></h1>
    </header>


    <div class="container blog-container">
        <small>15-June-2022</small>
        <br />
        <small>5-min read</small>

        <h3>Introduction</h3>
        <p>
            Let's say, we are cooking a dish, after tasting it we realized salt is a bit less.
What will we do then?
Of course, we will add more salt to it instead of cooking it again
Similarly, Reconciliation in React works, it computes and calculates the difference between virtual DOM and actual DOM and re-renders the changes on the screen.
        </p>
        <blockquote>Reconciliation is the process through which React updates the DOM. When a component‚Äôs state changes, React has to calculate if it is necessary to update the DOM. It does this by creating a virtual DOM and comparing it with the current DOM.
        </blockquote>

        <p>Many of us might be confused about what is DOM, DOM elements, React DOM, React elements, and virtual DOM. Let's check all the things one by one and we will assemble all the pieces at the end.</p>

        <img class="hero-img" src="/images/assembling.gif" alt="Assembling Image">

        <h3>What is DOM and DOM element?</h3>
        <p>
            DOM - Document object model
        </p>
        <p>
            A webpage is an HTML document, each thing we write in this document is an object, and a model means how we layout these objects. hence, Document Object Model(DOM)
        </p>
        <blockquote>
            The DOM is an object-oriented representation of the web page, which can be modified with a scripting language such as JavaScript.
        </blockquote>

        <p>
            Look at the HTML structure below. Everything inside this HTML document is called a node.
        </p>
        <p>Below are some types of nodes-</p>
        <p>
            <ul>
                <li>Comment node - <code>&lt;!-- Comment added --&gt;</code> </li>
               
                    <li>Element node -  <code>&lt;h1 class=&quot;C&quot;&gt;Hello World&lt;/h1&gt;</code>  also called as DOM element. DOM element means anything wrapped with HTML tags.</li>
                    <li>Attribute node - <code>class="C"</code></li>
                    <li>Text node - <code>Hello World</code></li>
            </ul>
        </p>

        <iframe
  src="https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=material&wt=none&l=htmlmixed&width=685&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%253C%21DOCTYPE%2520html%253E%250A%253Chtml%2520lang%253D%2522en%2522%253E%250A%250A%253Chead%253E%250A%2520%2520%2520%2520%253Ctitle%253EDocument%253C%252Ftitle%253E%250A%253C%252Fhead%253E%250A%250A%253Cbody%253E%250A%2520%2520%2520%2520%253C%21--%2520Comment%2520added%2520--%253E%250A%2520%2520%2520%2520%253Ch1%2520class%253D%2522C%2522%253EHello%2520World%253C%252Fh1%253E%250A%253C%252Fbody%253E%250A%250A%253C%252Fhtml%253E%250A"
  style="width: 685px; height: 522px; border:0; transform: scale(1); overflow:hidden;"
  sandbox="allow-scripts allow-same-origin">
</iframe>

        <h3>What is React DOM and React Element?</h3>
        <p>
            A React element describes what you want to see on the screen. React elements are the building blocks of React applications. React elements are immutable.
        </p>
        <blockquote>An element is a plain object describing a component instance or DOM node and its desired properties</blockquote>

        <p>Unlike DOM elements, React elements are plain JS objects as below:</p>

        <iframe
  src="https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=material&wt=none&l=htmlmixed&width=685&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%252F%252FReact%2520Element%250A%257B%250A%2520%2520%2520%2520type%253A%2520%27button%27%252C%250A%2520%2520%2520%2520props%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520className%253A%2520%27button-blue%27%252C%250A%2520%2520%2520%2520%2520%2520%2520%2520children%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520type%253A%2520%27b%27%252C%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520props%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520children%253A%2520%27OK%21%27%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%257D%250A%257D%250A%252F%252FEquivalent%2520DOM%2520Element%250A%253Cbutton%2520class%253D%27button-blue%27%253E%250A%2520%2520%2520%2520%253Cb%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520OK%21%250A%2520%2520%2520%2520%253C%252Fb%253E%250A%253C%252Fbutton%253E%250A"
  style="width: 685px; height: 558px; border:0; transform: scale(1); overflow:hidden;"
  sandbox="allow-scripts allow-same-origin">
</iframe>

<p>
    <ul>
        <li>type- for example button</li>
            <li>props- information about attributes, properties, and any child elements inside it</li>
    </ul>
</p>

<p> However, the type of an element can also be a function or a class corresponding to a React component. React components are small, reusable pieces of code that return a React element.</p>

<iframe
  src="https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=material&wt=none&l=htmlmixed&width=685&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=const%2520DangerButton%2520%253D%2520%28%257B%2520children%2520%257D%29%2520%253D%253E%2520%28%257B%250A%2520%2520%2520%2520type%253A%2520Button%252C%250A%2520%2520%2520%2520props%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520color%253A%2520%27red%27%252C%250A%2520%2520%2520%2520%2520%2520%2520%2520children%253A%2520children%250A%2520%2520%2520%2520%257D%250A%257D%29%253B%250A"
  style="width: 685px; height: 335px; border:0; transform: scale(1); overflow:hidden;"
  sandbox="allow-scripts allow-same-origin">
</iframe>

<p>Wait, what? But I never wrote my react components in the form of such objects!
    Yes, thanks to JSX. The above code can be re-written in JSX as below and now it is much more readable too. Babel runs React.createElement() to convert JSX to react elements(JS objects)</p>

    <iframe
  src="https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=material&wt=none&l=htmlmixed&width=685&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=19px&ph=28px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=const%2520DangerButton%2520%253D%2520%28%257B%2520children%2520%257D%29%2520%253D%253E%2520%28%257B%250A%2520%2520%2520%2520return%2520%253Cbutton%2520style%253D%257B%257Bcolor%253A%2520red%257D%257D%253E%257Bchildren%257D%253C%252Fbutton%253E%250A%257D%29%253B%250A"
  style="width: 685px; height: 186px; border:0; transform: scale(1); overflow:hidden;"
  sandbox="allow-scripts allow-same-origin">
</iframe>

<p>So to just walk you through what happens when react-app runs, check the below code:</p>

<iframe
  src="https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=material&wt=none&l=htmlmixed&width=685&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=26px&ph=28px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%252F%252F%2520in%2520HTML%2520file%250A%253Cdiv%2520id%253D%2522root%2522%253E%253C%252Fdiv%253E%250A%250A%252F%252Fin%2520JS%2520file%250Aconst%2520Button%2520%253D%2520%28%29%2520%253D%253E%2520%257B%250A%2520%2520return%2520%28%250A%2520%2520%2520%2520%253Cbutton%2520style%253D%257B%257B%2520color%253A%2520%2522red%2522%2520%257D%257D%253E%250A%2520%2520%2520%2520%2520%2520%253Cb%253EOk%21%253C%252Fb%253E%250A%2520%2520%2520%2520%253C%252Fbutton%253E%250A%2520%2520%29%253B%250A%257D%253B%250AReactDOM.render%28%253CButton%2520%252F%253E%252C%2520document.getElementById%28%2522root%2522%29%29%253B%250A"
  style="width: 685px; height: 368px; border:0; transform: scale(1); overflow:hidden;"
  sandbox="allow-scripts allow-same-origin">
</iframe>

<p>ReactDOM.render method runs and builds a DOM tree of React elements by traversing through all the elements from top to bottom.
    This React DOM gets inserted into the root node. In the above example div with id "root" is considered as DOM root, this is the point where React DOM will get inserted and hence We call this a ‚Äúroot‚Äù DOM node because everything inside it will be managed by React DOM
</p>

<h3>What is Virtual DOM?</h3>

<blockquote>React builds and maintains an internal representation of the rendered UI. It includes the React elements you return from your components. it is referred to as a ‚Äúvirtual DOM‚Äù. </blockquote>

<p>Let's revise once again until now.</p>
<p>Babel compiles JSX to React elements using React.createElement method React runs script . ReactDOM.render method runs -> render method builds DOM tree of react elements</p>

<p>When there are any changes due to state updates, the view should get updated with the required changes.
    In such a case as soon as the state updates, internally it calls the ReactDOM.render method, and again it builds a new DOM tree with updated changes.
    Just like we added salt in curry and not prepared a new one, in a similar way react compares newly created DOM tree and virtual DOM and computes the changes.
    This process is done by diffing algorithm, so that the changes should be as minimal as possible.</p>

    <p>This is the process called Reconciliation. It starts when the ReactDom.render method is called and at the end, it has information about what changes need to be done on the browser DOM nodes. And at last renderer like react-dom updates the screen with necessary changes.</p>

    <p>That's it!!!üòç I hope this blog gives you a basic understanding of how React works behind the hood.</p>

    <p><em>References:</em></p>
<ul>
<li><em><a href="https://reactjs.org/docs/faq-internals.html" class="list-item" target="_blank">reactjs.org/docs/faq-internals.html</a></em></li>
<li><em><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction" class="list-item" target="_blank">developer.mozilla.org/en-US/docs/Web/API/Do..</a></em></li>
<li><em><a href="https://reactjs.org/docs/reconciliation.html" class="list-item" target="_blank">reactjs.org/docs/reconciliation.html</a></em></li>
<li><em><a href="https://css-tricks.com/how-react-reconciliation-works/" class="list-item" target="_blank">css-tricks.com/how-react-reconciliation-works</a></em></li>
</ul>

        
    </div>


    <div style="height: 10vh"></div>
    <footer class="footer">
        <div class="footer-header">Connect with me on :</div>
        <ul class="social-links list-non-bullet">
            <li class="list-item-inline ">
                <a class="link" href="https://github.com/rishbitsnbytes">
                    github
                </a>
            </li>
            <li class="list-item-inline ">
                <a class="link" href="https://www.twitter.com/rishanopenbook">
                    twitter
                </a>
            </li>
            <li class="list-item-inline ">
                <a class="link" href="https://www.linkedin.com/in/rishrathore/">
                    linkedin
                </a>
            </li>

        </ul>

    </footer>


</body>

</html>